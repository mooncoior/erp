<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.naver.erp.ExamDAO">

	  <insert id="insertExamInfo" parameterType="com.naver.erp.ExamDTO" >
      insert into exam (
           exam_id
           , exam_name
           , exam_date
           , tea_id
      ) values( 
      (select (nvl(max(exam_id),0)+1) from exam)
         ,#{exam_name}
         ,to_date(#{exam_date},'yyyy-mm-dd')
         ,#{tea_id}
       )
   </insert> 
   
 
   
   <select id="getExamListCnt" resultType="int" >
	     select
	       count(*)
	          from exam
	          where 1=1
	          
          </select> 
     <select id="getExamListCntAll" resultType="int" >
	     select
	       count(*)
	          from exam
          </select>
          
	  <select id="getExamList" resultType="java.util.Map" >
	     select
	       
	           exam_id                           "exam_id"
	         , exam_name                        "exam_name"
	          ,(to_char(exam_date,'yyyy-mm-dd'))                "exam_date"
	          , (select tea_name from teacher t where e.tea_id = t.tea_id)       "tea_id"

	          from exam e
	          where 1=1
	  
          </select> 

         
</mapper>
